{% extends "app/layout3.html" %}

{% block content %}
{% load staticfiles %}

<section class="style-default-bright">
    <div>
        <div class="row">
	        <div class="col-md-12">
		        <h2> 论文列表 </h2>
                <br/>
	        </div><!--end .col -->
	        <div class="col-lg-12">
            	<div class="card">
				    <div class="card-body ">
		                <table class="table table-banded no-margin">
							<thead>
								<tr>
									<th>是否通过</th>
                                    {% if type == '管理员' or type == '辅导员' %}<th>学生学号</th><th>学生姓名</th>{% endif%}
									<th>论文题目</th>
									<th>第几作者</th>
									<th>期刊名称</th>
                                    <th>期刊等级</th>
                                    <th>项目时间</th>
                                    <th>{% if type == '管理员' or type == '辅导员' %}审核{% endif%}
                                    {% if type == '学生端' %}查看{% endif%}</th>
								</tr>
							</thead>
							<tbody>
                                {% if linksDS %}
                                    {% for p in linksDS%}
                                    <tr>
                                        <td>待审核</td>
                                        {% if type == '管理员' or type == '辅导员' %}<td>{{p.rl.student.StudentNum}}</td><td>{{p.rl.student.rankName}}</td>{% endif%}
                                        <td>{{p.l.rankName}}</td>
                                        <td>{{p.l.AuthorRanking}}</td>
                                        <td>{{p.l.journalName}}</td>
                                        <td>{{p.l.rank}}</td>
                                        <td>{{p.l.startingTime}}</td>
                                        <td>
                                        {% if type == '管理员' or type == '辅导员' %}
                                        <a class="btn btn-info" href= "/Check/{{p.rl.id}}" >审核</a>{% endif%}
                                        {% if type == '学生端' %}
                                        <a class="btn btn-info" href= "/Detail/{{p.rl.id}}" >查看</a>{% endif%}</td>
                                    </tr>
                                    {% endfor %}
                                {% endif %}

                                

                                {% if linksP %}
                                    {% for p in linksP%}
                                    <tr>
                                        <td>通过</td>
                                        {% if type == '管理员' or type == '辅导员' %}<td>{{p.rl.student.StudentNum}}</td><td>{{p.rl.student.rankName}}</td>{% endif%}
                                        <td>{{p.l.rankName}}</td>
                                        <td>{{p.l.AuthorRanking}}</td>
                                        <td>{{p.l.journalName}}</td>
                                        <td>{{p.l.rank}}</td>
                                        <td>{{p.l.startingTime}}</td>
                                        <td>
                                        {% if type == '管理员' or type == '辅导员' %}
                                        <a class="btn btn-info" href= "/Check/{{p.rl.id}}" >修改</a>{% endif%}
                                        <a class="btn btn-accent" href= "/Detail/{{p.rl.id}}" >查看</a></td>
                                    </tr>
                                    {% endfor %}
                                {% endif %}

                                {% if linksNP %}
                                    {% for p in linksNP%}
                                    <tr>
                                        <td>未通过</td>
                                        {% if type == '管理员' or type == '辅导员' %}<td>{{p.rl.student.StudentNum}}</td><td>{{p.rl.student.rankName}}</td>{% endif%}
                                        <td>{{p.l.rankName}}</td>
                                        <td>{{p.l.AuthorRanking}}</td>
                                        <td>{{p.l.journalName}}</td>
                                        <td>{{p.l.rank}}</td>
                                        <td>{{p.l.startingTime}}</td>
                                        <td>
                                        {% if type == '管理员' or type == '辅导员' %}
                                        <a class="btn btn-info" href= "/Check/{{p.rl.id}}" >修改</a>{% endif%}
                                        {% if type == '学生端' %}
                                        <a class="btn btn-info" href= "/Detail/{{p.rl.id}}" >查看</a>{% endif%}</td>
                                    </tr>
                                    {% endfor %}
                                {% endif %}
                                {% if not linksNP and not linksDS and not linksP %}
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td><i>暂时没有论文记录</i></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endif %}
							</tbody>
						</table>
                    </div>
                </div>
	        </div><!--end .col -->
        </div>

        {#<hr class="ruler-xl">#}
        
        <div class="row">
		    <div class="col-lg-12">
            <h2> 添加论文 </h2>
            <br/>

            
			    <div class="card">
				    <div class="card-body ">
                    {% if error %}
                    <div class="alert alert-danger" role="alert">
					        <strong>错误</strong> {{error}}
			        </div>
                    {% endif %}
                    {% if alert %}
                    <div class="alert alert-warning" role="alert">
				        <strong>警告</strong> {{alert}}
			        </div>
                    {% endif %}
                    {% if success %}
                    <div class="alert alert-success" role="alert">
				        <strong></strong> {{success}}
			        </div>
                    {% endif %}
					    <div id="rootwizard2" class="form-wizard form-wizard-horizontal">
											<form class="form floating-label form-validation" method="post" action="#" id="paperSubmit" role="form" novalidate="novalidate">
												<div class="form-wizard-nav">
													<div class="progress"><div class="progress-bar progress-bar-primary"></div></div>
													<ul class="nav nav-justified">
														<li class="active"><a href="#step1" data-toggle="tab"><span class="step">1</span> <span class="title">论文信息</span></a></li>
														<li><a href="#step2" data-toggle="tab"><span class="step">2</span> <span class="title">期刊信息</span></a></li>
													</ul>
												</div><!--end .form-wizard-nav -->
												<div class="tab-content clearfix">
													<div class="tab-pane active" id="step1">
                                                    <br/><br/>	
                                                    {% csrf_token %}
														<div class="form-group">
                                                            {{createForm.ProjectName}}
															<label for="title" class="control-label">{{createForm.ProjectName.label_tag}}</label>
														</div>
														<div class="form-group control-width-normal">
                                                            {{createForm.AuthorRanking}}											
															<label for="author" {#class="control-label"#}>{{createForm.AuthorRanking.label_tag}}	</label>
														</div>                                                        
                                                        <div class="form-group control-width-normal">
                                                            {{createForm.ProjectTime}}
                                                            <label>{{createForm.ProjectTime.label_tag}}</label>												                
											            </div>                                                    
													</div><!--end #step1 -->
													<div class="tab-pane" id="step2">
														<br/><br/>
														<div class="form-group">
                                                            {{createForm.JournalName}}
                                                            <label class="control-label">{{createForm.JournalName.label_tag}}</label>
														</div>
														<div class="form-group">
                                                            {{createForm.Rank}}
                                                            <label class="control-label">{{createForm.Rank.label_tag}}</label>
														</div>
                    {% if type == "辅导员" or type == '管理员'%}	
														<div class="form-group">
                                                            <input  type="text" class="form-control" name="stnn"/>
                                                            <label class="control-label">学生学号</label>
														</div>
                    {% endif %}
													</div><!--end #step2 -->
													
												</div><!--end .tab-content -->
												<ul class="pager wizard">								
               <li><a class="btn-raised" type="submit" href="javascript:void(0);" onclick="document.getElementById('paperSubmit').submit()" >提交</a></li>
												</ul>
											</form>
										</div><!--end #rootwizard -->
				    </div><!--end .card-body -->
			    </div><!--end .card -->
			    {#<em class="text-caption">Form wizard with validation</em>#}
		    </div><!--end .col -->
	    </div>

       
    </div>
</section>

{% endblock %}

{% block jscript %}
<script src="{%static 'app/assets/js/libs/jquery-validation/dist/jquery.validate.min.js'%}"></script>
<script src="{%static 'app/assets/js/libs/jquery-validation/dist/additional-methods.min.js'%}"></script>
<script src="{%static 'app/assets/js/libs/wizard/jquery.bootstrap.wizard.min.js'%}"></script>
<script src="{%static 'app/assets/js/libs/DataTables/jquery.dataTables.min.js'%}"></script>

<script src="{%static 'app/assets/js/libs/DataTables/extensions/ColVis/js/dataTables.colVis.min.js'%}"></script>
<script src="{%static 'app/assets/js/libs/DataTables/extensions/TableTools/js/dataTables.tableTools.min.js'%}"></script>
<script src="{%static 'app/assets/js/core/demo/DemoFormComponents.js'%}"></script>

<script src="{%static 'app/assets/js/core/demo/DemoFormWizard.js'%}"></script>
<script src="{%static 'app/assets/js/core/demo/DemoUIMessages.js'%}"></script>

{% endblock %}

{%block css%}
<link type="text/css" rel="stylesheet" href="{%static 'app/assets/css/theme-5/libs/wizard/wizard.css'%}" />
<link type="text/css" rel="stylesheet" href="{%static 'app/assets/css/theme-5/libs/DataTables/jquery.dataTables.css'%}"/>
<link type="text/css" rel="stylesheet" href="{%static 'app/assets/css/theme-5/libs/DataTables/extensions/dataTables.colVis.css'%}" />
<link type="text/css" rel="stylesheet" href="{%static 'app/assets/css/theme-5/libs/DataTables/extensions/dataTables.tableTools.css'%}" />

{%endblock%}